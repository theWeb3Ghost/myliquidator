##Liquidator script for morpho lending contracts.

This script identifies liquidate-able positions, simulate onchain to identify if the contract is really liquidtable, if yes runs aj onchain script that takes the position ... swaps the collateral and pays the contract, hearbly getting incentives according to the shares.

## Deployment

## Prerequisites
- Git
- Node.js and npm
- Foundry

## Setup Steps

### 1. Clone the Repository
```bash
git clone (https://github.com/theWeb3Ghost/myliquidator)
cd myliquidator
```

### 2. Install Foundry
```bash
curl -L https://foundry.paradigm.xyz | bash
foundryup
```

### 3. Install OpenZeppelin Contracts
```bash
forge install OpenZeppelin/openzeppelin-contracts
```

### 4. Configure Remappings
Create or update `remappings.txt`:
```
@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/
```

### 5. Copy Contract Files
Copy the `.sol` files from this repository into the `src/` directory:
```bash
cp morpho.sol foundry/src/
```

### 6. Environment Configuration
Create a `.env` file in the root directory:
```bash
PRIVATE_KEY=your_private_key_here
RPC_URL=your_rpc_url_here
```

**âš ï¸ Important:** Never commit your `.env` file. Add it to `.gitignore`.

### 7. Deploy the Contract

#### Prepare Deploy Script
Navigate to the deploy script and input:
- Your private key
- Constructor parameters

#### Run Deployment
```bash
forge script script/Deploy.s.sol:DeployScript --rpc-url $RPC_URL  --broadcast
```

#### Save Contract Address
After deployment, copy the Contract Address (CA) from the output.

### 8. Configure Interaction Script

#### Create Environment File
In the `scripts/` folder, create an `.env` file:
```bash
cd scripts
touch .env
```

#### Add Configuration Variables
```env
MORPHO_ADDRESS=0x...
RPC_URL=your_rpc_url
PRIVATE_KEY=your_private_key
LIQUIDATOR_CONTRACT=0x... # Your deployed contract address
CHAIN_ID=your_chain_id
```

### 9. Extract Contract ABI
The ABI is automatically generated by Foundry after compilation:
```bash
# ABI location
cat out/morpho.sol/morpho.json
```

Copy the ABI array and add it to your script.
Or create a file in the script folder

### 10. Setup Interaction Script
The script is already created in script folder in this repo, just configure the abi of the deployed contract into it, Id everything is set up correctly. With your env and all.. it should run once.
```

### 11. Configure Chain (HyperEVM Example)
Ensure your chain configuration matches your deployment:

```javascript
const chainConfig = {
  chainId: process.env.CHAIN_ID, // e.g., for Morpho contracts
  name: 'HyperEVM',
  rpcUrl: process.env.RPC_URL
};
```

### 12. Run the Script
```bash
node scripts/interact.js
```

## Network Configuration

Make sure your RPC URL and Chain ID match the network where Morpho contracts are deployed: check the documentation at https://docs.morpho.org/tools/offchain/api/get-started/

| Network | Chain ID | RPC URL |
|---------|----------|---------|
| [Add your specific network details] | [Chain ID] | [RPC URL] |

## Troubleshooting

- **Deployment fails:** Verify your private key has sufficient funds
- **Script can't find ABI:** Ensure you've compiled with `forge build`
- **RPC errors:** Verify your RPC URL is correct and accessible
- **Chain mismatch:** Double-check chain ID matches your deployment network
- **Only Owner errors:** ensure the private key that deployed the transaction is the one running the script during contract calls.

## Security Notes

- Never expose private keys in code or version control
- Use environment variables for all sensitive data
- Keep `.env` files in `.gitignore`
- Consider using hardware wallets for mainnet deployments
